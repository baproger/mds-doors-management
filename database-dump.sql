PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "migrations" ("id" integer primary key autoincrement not null, "migration" varchar not null, "batch" integer not null);
INSERT INTO migrations VALUES(1,'0001_01_01_000000_create_users_table',1);
INSERT INTO migrations VALUES(2,'0001_01_01_000001_create_cache_table',1);
INSERT INTO migrations VALUES(3,'0001_01_01_000002_create_jobs_table',1);
INSERT INTO migrations VALUES(4,'2025_08_04_061208_create_branches_table',1);
INSERT INTO migrations VALUES(5,'2025_08_04_061211_create_contracts_table',1);
INSERT INTO migrations VALUES(6,'2025_08_04_062137_add_branch_id_to_users_table',1);
INSERT INTO migrations VALUES(7,'2025_08_05_061540_update_branches_with_new_data',2);
INSERT INTO migrations VALUES(8,'2025_08_05_065317_add_manager_to_contracts_table',3);
INSERT INTO migrations VALUES(9,'2025_08_05_065856_remove_accountant_role_from_users_table',4);
INSERT INTO migrations VALUES(10,'2025_08_05_074309_create_managers_table',5);
INSERT INTO migrations VALUES(11,'2025_08_05_111820_add_user_id_to_managers_table',6);
INSERT INTO migrations VALUES(12,'2025_08_05_122154_add_rop_role_to_users_table',7);
CREATE TABLE IF NOT EXISTS "password_reset_tokens" ("email" varchar not null, "token" varchar not null, "created_at" datetime, primary key ("email"));
CREATE TABLE IF NOT EXISTS "sessions" ("id" varchar not null, "user_id" integer, "ip_address" varchar, "user_agent" text, "payload" text not null, "last_activity" integer not null, primary key ("id"));
INSERT INTO sessions VALUES('o6hBAyQJ4QNGa4qKqyp0lRkrvPft8VInJG4T657O',1,'127.0.0.1','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36','YTo0OntzOjY6Il90b2tlbiI7czo0MDoiZWFlczB4eWREMVAyWWxCRjB0UE93T3pZZHplUm9GU3ViMnNuSDV1RiI7czo2OiJfZmxhc2giO2E6Mjp7czozOiJvbGQiO2E6MDp7fXM6MzoibmV3IjthOjA6e319czo5OiJfcHJldmlvdXMiO2E6MTp7czozOiJ1cmwiO3M6Mzc6Imh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hZG1pbi9jb250cmFjdHMiO31zOjUwOiJsb2dpbl93ZWJfNTliYTM2YWRkYzJiMmY5NDAxNTgwZjAxNGM3ZjU4ZWE0ZTMwOTg5ZCI7aToxO30=',1754405452);
INSERT INTO sessions VALUES('E2T3N9BJXDObHkFNgSq5CESJEKlqGSMO8FZeBhJc',19,'127.0.0.1','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36','YTo0OntzOjY6Il90b2tlbiI7czo0MDoicXRaWURvWjl1R2ZPRVp5SUhmczdjdDNmSzAxN2xwc3J3d1FvZDNjaSI7czo2OiJfZmxhc2giO2E6Mjp7czozOiJvbGQiO2E6MDp7fXM6MzoibmV3IjthOjA6e319czo5OiJfcHJldmlvdXMiO2E6MTp7czozOiJ1cmwiO3M6MzE6Imh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9jb250cmFjdHMiO31zOjUwOiJsb2dpbl93ZWJfNTliYTM2YWRkYzJiMmY5NDAxNTgwZjAxNGM3ZjU4ZWE0ZTMwOTg5ZCI7aToxOTt9',1754404917);
INSERT INTO sessions VALUES('hSizufODxJfZLn7kXOsUrj0HLmfiwtTZihRh6z5l',NULL,'127.0.0.1','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36','YTo0OntzOjY6Il90b2tlbiI7czo0MDoiamhRaDB0SUl0TXREdkwzb0tINzFscG1GdXl1VXB1Z09QbnBldFZOYSI7czozOiJ1cmwiO2E6MTp7czo4OiJpbnRlbmRlZCI7czozNzoiaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FkbWluL2NvbnRyYWN0cyI7fXM6OToiX3ByZXZpb3VzIjthOjE6e3M6MzoidXJsIjtzOjI3OiJodHRwOi8vMTI3LjAuMC4xOjgwMDAvbG9naW4iO31zOjY6Il9mbGFzaCI7YToyOntzOjM6Im9sZCI7YTowOnt9czozOiJuZXciO2E6MDp7fX19',1754454441);
CREATE TABLE IF NOT EXISTS "cache" ("key" varchar not null, "value" text not null, "expiration" integer not null, primary key ("key"));
CREATE TABLE IF NOT EXISTS "cache_locks" ("key" varchar not null, "owner" varchar not null, "expiration" integer not null, primary key ("key"));
CREATE TABLE IF NOT EXISTS "jobs" ("id" integer primary key autoincrement not null, "queue" varchar not null, "payload" text not null, "attempts" integer not null, "reserved_at" integer, "available_at" integer not null, "created_at" integer not null);
CREATE TABLE IF NOT EXISTS "job_batches" ("id" varchar not null, "name" varchar not null, "total_jobs" integer not null, "pending_jobs" integer not null, "failed_jobs" integer not null, "failed_job_ids" text not null, "options" text, "cancelled_at" integer, "created_at" integer not null, "finished_at" integer, primary key ("id"));
CREATE TABLE IF NOT EXISTS "failed_jobs" ("id" integer primary key autoincrement not null, "uuid" varchar not null, "connection" text not null, "queue" text not null, "payload" text not null, "exception" text not null, "failed_at" datetime not null default CURRENT_TIMESTAMP);
CREATE TABLE IF NOT EXISTS "branches" ("id" integer primary key autoincrement not null, "name" varchar not null, "code" varchar not null, "contract_counter" integer not null default '1', "created_at" datetime, "updated_at" datetime);
INSERT INTO branches VALUES(1,'Шымкент Прайм парк','SHY-PP',20000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(2,'Шымкент Ремзона','SHY-RZ',30000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(3,'Актобе','AKT',40000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(4,'Алматы Тастак','ALA-TST',50000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(5,'Алматы СтройСити','ALA-SC',58000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(6,'Тараз','TRZ',100000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(7,'Атырау','ATR',120000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
INSERT INTO branches VALUES(8,'Ташкент','TAS',60000,'2025-08-05 06:16:02','2025-08-05 06:16:02');
CREATE TABLE IF NOT EXISTS "contracts" ("id" integer primary key autoincrement not null, "contract_number" varchar not null, "user_id" integer not null, "branch_id" integer not null, "client" varchar not null, "instagram" varchar not null, "iin" varchar not null, "phone" varchar not null, "phone2" varchar not null, "address" text, "payment" varchar not null default 'Наличный', "date" date not null, "category" varchar not null, "model" varchar not null, "width" numeric not null, "height" numeric not null, "design" varchar not null default 'Меняется', "leaf" varchar not null, "framugawidth" varchar not null, "framugaheight" varchar not null, "forging" varchar, "opening" varchar not null default 'Правое', "frame" varchar not null default 'Стандарт', "outer_panel" varchar not null, "outer_cover" varchar not null, "outer_cover_color" varchar, "metal_cover_hidden" varchar not null default 'Порошково-полимерное', "metal_cover_color" varchar, "inner_trim" varchar not null, "inner_cover" varchar not null, "inner_trim_color" varchar, "glass_unit" varchar not null, "extra" varchar, "lock" varchar not null, "handle" varchar not null, "steel_thickness" numeric not null, "canvas_thickness" integer not null, "measurement" varchar not null default 'online', "delivery" varchar not null default '+', "installation" text, "order_total" numeric not null, "order_deposit" numeric not null, "order_remainder" numeric not null, "order_due" numeric not null, "photo_path" varchar, "attachment_path" varchar, "status" varchar check ("status" in ('draft', 'review', 'approved', 'ready_to_print')) not null default 'draft', "data" text, "created_at" datetime, "updated_at" datetime, "manager" varchar, foreign key("user_id") references "users"("id") on delete cascade, foreign key("branch_id") references "branches"("id") on delete cascade);
CREATE TABLE IF NOT EXISTS "users" ("id" integer primary key autoincrement not null, "name" varchar not null, "email" varchar not null, "email_verified_at" datetime, "password" varchar not null, "remember_token" varchar, "created_at" datetime, "updated_at" datetime, "branch_id" integer, "role" varchar check ("role" in ('manager', 'admin', 'rop')) not null default 'manager', foreign key("branch_id") references "branches"("id") on delete set null);
INSERT INTO users VALUES(1,'Admin','admin@admin.com',NULL,'$2y$12$EKB.QgbIBooSvLe09ItT/uu1xZ91GgkQWb.32At2r1qi1Oe2vWTgK',NULL,'2025-08-04 13:19:40','2025-08-05 12:25:12',1,'admin');
INSERT INTO users VALUES(8,'Ербол Смаилов','erekesuperhero@gmail.com',NULL,'$2y$12$PVH.mHVYyhr8wmz8QW1kv.Qt6tKq036KZqlKrAHW6ODgd1HV5VaOq',NULL,'2025-08-05 11:22:11','2025-08-05 11:22:11',4,'manager');
INSERT INTO users VALUES(9,'Дарина Жакай','darina.zhakay@mail.ru',NULL,'$2y$12$ccDirl9PmN2t7gf0qPMaB.n8udET6CSreispRhU8IS.J12i/YIuHG',NULL,'2025-08-05 11:54:41','2025-08-05 11:54:41',4,'manager');
INSERT INTO users VALUES(10,'Жамбыл Пірәліұлы','zhambyl.piraliuly@gmail.com',NULL,'$2y$12$qbpqgSkJtApR2ZPHjKLmLuSpOJ2Tv0YPU2EgybXBsYvgM3XG8Ipvy',NULL,'2025-08-05 11:56:48','2025-08-05 11:56:48',1,'manager');
INSERT INTO users VALUES(11,'Зухра Махмутова','fatimamahmutova05@gmail.com',NULL,'$2y$12$ZmSVZmZI98jfGdT/JQhwPe1.4jkJg/YJBueZ9nfHHYmHUOIOTJUb6',NULL,'2025-08-05 11:57:29','2025-08-05 11:57:29',2,'manager');
INSERT INTO users VALUES(12,'Фарход Сулейманов','Faha_93_34@mail.ru',NULL,'$2y$12$6SUCY3SeUqSlIcYZKJuVRuJuUqp6sEV4hwmk.QE0oDqxoio/GAq0u',NULL,'2025-08-05 11:58:55','2025-08-05 11:58:55',4,'manager');
INSERT INTO users VALUES(13,'Тоқмұсбек Әбілдабек','tokmusbek003@gmail.com',NULL,'$2y$12$FktoHWazObV.SPe/qj24aunfdhEPhQs8wZllJVP3PuhpStpYDUT9W',NULL,'2025-08-05 11:59:36','2025-08-05 11:59:36',1,'manager');
INSERT INTO users VALUES(14,'Маржан Галымжановна','ozhantaevamarzhan@gmail.com',NULL,'$2y$12$qk.8U0SROJMxfB.GKW/nk.kejcCrFJyD28CIrWY/DlSpfDK6XRKze',NULL,'2025-08-05 12:00:07','2025-08-05 12:00:07',4,'manager');
INSERT INTO users VALUES(15,'Фатима Махмутова','fatima.mahkmutova@mail.ru',NULL,'$2y$12$8La7K1lOhOpGz4xpNkIkb.pooa6m5xJGA8mWCBgqc3.XZCEtjZFiy',NULL,'2025-08-05 12:00:26','2025-08-05 12:00:26',2,'manager');
INSERT INTO users VALUES(16,'Әлсейіт Әбсейіт','alseytabseyt@gmail.com',NULL,'$2y$12$BFyLHCV1GyeEHFybT4jdju.8yXyRPxw45kduIvhm5Fw3g/Icb1RqG',NULL,'2025-08-05 13:28:42','2025-08-05 13:28:42',2,'manager');
INSERT INTO users VALUES(17,'Даулет Жаксибеков','dake.zb@mail.ru',NULL,'$2y$12$Gdy5XnT3IsNudl8FjGKJlewJxjYby/koFEGXfJvF2MGjg2uGwTmne',NULL,'2025-08-05 13:49:46','2025-08-05 13:49:46',4,'manager');
INSERT INTO users VALUES(18,'Бақдаулет Сейдалы','bagdaulet_seydaly@mail.ru',NULL,'$2y$12$itOqHG3jKYCa37.cQbZ4..nvJBlBd5JSAciBhhlqreK.hH/P3MH9u',NULL,'2025-08-05 13:57:10','2025-08-05 13:57:40',2,'rop');
INSERT INTO users VALUES(19,'Амитова Сымбат','aktosha_00@mail.ru',NULL,'$2y$12$LlyiMVD8I2fLxzPe0TRcXeeyMe8AIwTKjWyvFltlM4fFDn2I0iuCW',NULL,'2025-08-05 14:36:47','2025-08-05 14:36:47',1,'manager');
CREATE TABLE IF NOT EXISTS "managers" ("id" integer primary key autoincrement not null, "branch_id" integer not null, "name" varchar not null, "role" varchar not null default ('manager'), "phone" varchar, "email" varchar, "is_active" tinyint(1) not null default ('1'), "created_at" datetime, "updated_at" datetime, "user_id" integer, foreign key("branch_id") references branches("id") on delete cascade on update no action, foreign key("user_id") references "users"("id") on delete set null);
INSERT INTO managers VALUES(3,1,'Самал Елемес','manager','+7(708) 989 73 03','samalelemes0@gmail.com',1,'2025-08-05 11:08:59','2025-08-05 11:08:59',NULL);
INSERT INTO managers VALUES(4,4,'Ербол Смаилов','manager','+7(708) 243 42 07','erekesuperhero@gmail.com',1,'2025-08-05 11:22:11','2025-08-05 11:22:11',8);
INSERT INTO managers VALUES(5,4,'Дарина Жакай','manager','+7(778) 995 21 93','darina.zhakay@mail.ru',1,'2025-08-05 11:54:41','2025-08-05 11:54:41',9);
INSERT INTO managers VALUES(6,1,'Жамбыл Пірәліұлы','rop','+7(747) 325 51 44','zhambyl.piraliuly@gmail.com',1,'2025-08-05 11:56:48','2025-08-05 11:56:48',10);
INSERT INTO managers VALUES(7,2,'Зухра Махмутова','manager','+7(775) 170 64 94','fatimamahmutova05@gmail.com',1,'2025-08-05 11:57:29','2025-08-05 11:57:29',11);
INSERT INTO managers VALUES(8,4,'Фарход Сулейманов','manager','+7 (747) 386 14 20','Faha_93_34@mail.ru',1,'2025-08-05 11:58:55','2025-08-05 11:58:55',12);
INSERT INTO managers VALUES(9,1,'Тоқмұсбек Әбілдабек','manager','+7 (707) 299 27 95','tokmusbek003@gmail.com',1,'2025-08-05 11:59:36','2025-08-05 11:59:36',13);
INSERT INTO managers VALUES(10,4,'Маржан Галымжановна','manager','+7 (747) 768 85 36','ozhantaevamarzhan@gmail.com',1,'2025-08-05 12:00:07','2025-08-05 12:00:07',14);
INSERT INTO managers VALUES(11,2,'Фатима Махмутова','manager','+7 (775) 227 45 61','fatima.mahkmutova@mail.ru',1,'2025-08-05 12:00:26','2025-08-05 12:00:26',15);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('migrations',12);
INSERT INTO sqlite_sequence VALUES('users',19);
INSERT INTO sqlite_sequence VALUES('contracts',5);
INSERT INTO sqlite_sequence VALUES('branches',9);
INSERT INTO sqlite_sequence VALUES('managers',11);
CREATE INDEX "sessions_user_id_index" on "sessions" ("user_id");
CREATE INDEX "sessions_last_activity_index" on "sessions" ("last_activity");
CREATE INDEX "jobs_queue_index" on "jobs" ("queue");
CREATE UNIQUE INDEX "failed_jobs_uuid_unique" on "failed_jobs" ("uuid");
CREATE UNIQUE INDEX "branches_code_unique" on "branches" ("code");
CREATE UNIQUE INDEX "contracts_contract_number_unique" on "contracts" ("contract_number");
CREATE UNIQUE INDEX "users_email_unique" on "users" ("email");
COMMIT;
